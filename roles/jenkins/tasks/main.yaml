---
# tasks file for jenkins on CENTOS
- name: Install Java
  yum:
    name: java-1.8.0-openjdk.x86_64
    state: present
- name: Add Jenkins key
  get_url:
    url: http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo  
    dest: /etc/yum.repos.d/jenkins.repo  
- name: Import key for jenkins 
  rpm_key:
    state: present
    key: https://pkg.jenkins.io/redhat/jenkins.io.key
- name: Install Jenkins
  yum:
    name: jenkins
    state: present
- name: Start Jenkins
  service: 
    name: jenkins
    state: started
- name: Pass initialAdminPassword
  command: pass_jen=$(sudo cat /var/lib/jenkins/secrets/initialAdminPassword)
  command: curl --form "security-token="$pass_jen"" http://localhost:8080/login  
  #dnf :
   # name: jenkins
   # state: present
